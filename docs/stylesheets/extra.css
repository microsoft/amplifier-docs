/* ============================================================
   Amplifier Documentation — Component Design System
   Drop-in enhancement layer for MkDocs Material.

   Structure:
     1.  Design tokens
     2.  Hero section
     3.  Feature cards  (.grid .card)
     4.  Module cards   (.module-card)
     5.  Terminal       (.terminal)
     6.  Tables
     7.  Architecture diagram  (.architecture-diagram)
     8.  Code blocks
     9.  Admonitions
     10. Buttons & links
     11. Reduced motion
   ============================================================ */


/* ------------------------------------------------------------
   1. DESIGN TOKENS
   All component styles are driven by these custom properties.
   Swapping brand colors here propagates everywhere.
   ------------------------------------------------------------ */

:root {
  /* Brand */
  --md-primary-fg-color:  #4051b5;
  --md-accent-fg-color:   #526cfe;

  /* RGB tuples — used for rgba() composition throughout */
  --amp-primary-rgb: 64, 81, 181;
  --amp-accent-rgb:  82, 108, 254;

  /* Signal — sky blue, used for AI/intelligence-layer callouts only */
  --amp-signal:     #0ea5e9;
  --amp-signal-rgb: 14, 165, 233;

  /* Tip admonition green — token-driven so dark mode can brighten it */
  --amp-tip-rgb: 0, 200, 83;

  /* Card surface */
  --amp-card-bg:             transparent;
  --amp-card-border:         rgba(0, 0, 0, 0.10);
  --amp-card-shadow:         0 1px 3px  rgba(0, 0, 0, 0.06),
                             0 4px 16px rgba(0, 0, 0, 0.04);
  --amp-card-shadow-hover:   0 4px 12px rgba(0, 0, 0, 0.10),
                             0 16px 40px rgba(0, 0, 0, 0.08);
  --amp-card-radius:         10px;

  /* Corner gradient tint applied inside cards */
  --amp-surface-tint:        rgba(64, 81, 181, 0.03);

  /* Radius scale — two tiers, both tokenized */
  --amp-card-radius:         10px;   /* elevated surfaces: cards, terminal */
  --amp-radius-sm:            8px;   /* inline/nested: module-cards, icons, code */
}

[data-md-color-scheme="slate"] {
  --md-primary-fg-color:  #7c8aff;
  --md-accent-fg-color:   #526cfe;

  --amp-primary-rgb: 124, 138, 255;
  --amp-accent-rgb:  82,  108, 254;

  /* Signal — lighter sky for dark backgrounds */
  --amp-signal:     #38bdf8;
  --amp-signal-rgb: 56, 189, 248;

  /* Tip — slightly brighter green for dark surfaces */
  --amp-tip-rgb: 52, 211, 100;

  /* FIX: Material slate overrides links to amber (#e68a00).
     Keep links in the indigo brand family in dark mode. */
  --md-typeset-a-color: #a5b4fc;

  --amp-card-bg:             rgba(255, 255, 255, 0.04);
  --amp-card-border:         rgba(255, 255, 255, 0.08);
  --amp-card-shadow:         0 1px 4px  rgba(0, 0, 0, 0.35),
                             0 4px 16px rgba(0, 0, 0, 0.25);
  --amp-card-shadow-hover:   0 4px 20px rgba(0, 0, 0, 0.55),
                             0 16px 48px rgba(0, 0, 0, 0.35);
  --amp-surface-tint:        rgba(124, 138, 255, 0.05);

  /* FIX: accent must be lighter than primary in dark mode so the
     hero gradient runs dark→light (not the reversed light→dark bug) */
  --md-accent-fg-color: #a5b4fc;
}


/* ============================================================
   2. HERO SECTION
   Gradient tagline text + ambient radial glow.
   Scoped to home page only via :has(.hero) — no other pages
   have this class so the h1 treatment won't bleed through.
   ============================================================ */

/* Home page h1 — larger, tighter tracking */
.md-typeset:has(.hero) h1:first-of-type {
  font-size: clamp(2.1rem, 5vw, 3rem);
  font-weight: 800;
  letter-spacing: -0.025em;
  line-height: 1.1;
  margin-bottom: 0.25rem;
}

.md-typeset .hero {
  text-align: center;
  padding: 0.5rem 0 3rem;
  position: relative;
}

/* Ambient radial glow anchored to hero top-centre */
.md-typeset .hero::before {
  content: '';
  position: absolute;
  top: -4rem;
  left: 50%;
  transform: translateX(-50%);
  width: min(640px, 100%);
  height: 340px;
  background: radial-gradient(
    ellipse at 50% 10%,
    rgba(var(--amp-primary-rgb), 0.10) 0%,
    rgba(var(--amp-primary-rgb), 0.03) 50%,
    transparent 70%
  );
  pointer-events: none;
  z-index: -1;
}

/* Gradient tagline — the single highest-impact change available in CSS-only */
.md-typeset .hero p,
.md-typeset .hero > p {
  font-size: 1.3rem;
  font-weight: 500;
  line-height: 1.5;
  opacity: 1;
  background: linear-gradient(
    135deg,
    var(--md-primary-fg-color)  0%,
    var(--md-accent-fg-color)  100%
  );
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}


/* ============================================================
   3. FEATURE CARDS  —  .grid .card
   Top accent bar (::before) + corner tint (::after) +
   layered shadows + smooth spring hover.
   ============================================================ */

.md-typeset .grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1rem;
  margin: 1.5rem 0 2rem;
}

.md-typeset .grid .card {
  position: relative;
  padding: 1.5rem;
  background: var(--amp-card-bg);
  border: 1px solid var(--amp-card-border);
  border-radius: var(--amp-card-radius);
  overflow: hidden;
  box-shadow: var(--amp-card-shadow);
  transition:
    box-shadow   260ms cubic-bezier(0.16, 1, 0.3, 1),
    transform    260ms cubic-bezier(0.16, 1, 0.3, 1),
    border-color 260ms ease;
}

/* Accent gradient bar — top edge, dims at rest */
.md-typeset .grid .card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(
    90deg,
    var(--md-primary-fg-color),
    var(--md-accent-fg-color)
  );
  opacity: 0.55;
  transition: opacity 260ms ease;
}

/* Corner tint — brand ambient fill bleeds from top-left */
.md-typeset .grid .card::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    135deg,
    var(--amp-surface-tint) 0%,
    transparent 55%
  );
  pointer-events: none;
  border-radius: inherit;
}

/* Hover — lift, border colour shift, accent bar at full opacity */
.md-typeset .grid .card:hover {
  box-shadow: var(--amp-card-shadow-hover);
  transform: translateY(-3px);
  border-color: rgba(var(--amp-primary-rgb), 0.28);
}

.md-typeset .grid .card:hover::before {
  opacity: 1;
}

/* Dark mode hover: thin accent ring + ambient glow */
[data-md-color-scheme="slate"] .md-typeset .grid .card:hover {
  box-shadow:
    var(--amp-card-shadow-hover),
    0 0 0 1px rgba(var(--amp-primary-rgb), 0.14),
    0 0 36px rgba(var(--amp-primary-rgb), 0.06);
}

/* Card heading */
.md-typeset .grid .card h3 {
  position: relative;
  z-index: 1;
  margin: 0 0 0.6rem;
  font-size: 1rem;
  font-weight: 600;
  letter-spacing: 0.005em;
  line-height: 1.3;
  color: var(--md-typeset-color);
}

/* Card body */
.md-typeset .grid .card p {
  position: relative;
  z-index: 1;
  margin: 0;
  font-size: 0.875rem;
  line-height: 1.65;
  color: var(--md-default-fg-color--light);
}

/* Icon slot — place <span class="card__icon"><svg ...></svg></span>
   before the h3. SVG inherits currentColor from the brand token. */
.md-typeset .grid .card .card__icon {
  display: block;
  width: 1.75rem;
  height: 1.75rem;
  margin-bottom: 0.875rem;
  position: relative;
  z-index: 1;
  color: var(--md-primary-fg-color);
}

.md-typeset .grid .card .card__icon svg {
  width: 100%;
  height: 100%;
  display: block;
}


/* ============================================================
   4. MODULE CARDS  —  .module-card
   Flex row: icon container + content block.
   Slides horizontally on hover (suggests navigation / selection).
   ============================================================ */

.md-typeset .module-card {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  padding: 1rem 1.25rem;
  margin: 0.5rem 0;
  background: var(--amp-card-bg);
  border: 1px solid var(--amp-card-border);
  border-radius: var(--amp-radius-sm);
  transition:
    box-shadow   200ms cubic-bezier(0.16, 1, 0.3, 1),
    transform    200ms cubic-bezier(0.16, 1, 0.3, 1),
    border-color 200ms ease;
}

.md-typeset .module-card:hover {
  box-shadow: var(--amp-card-shadow);
  transform: translateX(3px);
  border-color: rgba(var(--amp-primary-rgb), 0.30);
}

/* Icon container — rounded square with brand-tinted background */
.md-typeset .module-card .icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  min-width: 2.5rem;
  border-radius: var(--amp-radius-sm);
  background: rgba(var(--amp-primary-rgb), 0.08);
  font-size: 1.25rem;
  line-height: 1;
  flex-shrink: 0;
}

[data-md-color-scheme="slate"] .md-typeset .module-card .icon {
  background: rgba(var(--amp-primary-rgb), 0.13);
}

.md-typeset .module-card .content {
  flex: 1;
  min-width: 0;
}

.md-typeset .module-card .content h4 {
  margin: 0 0 0.3rem;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--md-typeset-color);
}

.md-typeset .module-card .content p {
  margin: 0;
  font-size: 0.825rem;
  line-height: 1.55;
  color: var(--md-default-fg-color--light);
}


/* ============================================================
   5. TERMINAL  —  .terminal
   Dark window with macOS chrome dots, GitHub Dark palette.
   Dots use three radial-gradient stops on a single element —
   no box-shadow tricks, no overflow issues.
   ============================================================ */

.md-typeset .terminal {
  position: relative;
  background: #161b22;            /* GitHub dark canvas */
  color: #e6edf3;
  padding: 1.25rem;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  font-family: var(--md-code-font-family);
  font-size: 0.85rem;
  line-height: 1.65;
  overflow-x: auto;
  box-shadow:
    0 4px 20px rgba(0, 0, 0, 0.35),
    0 1px 3px  rgba(0, 0, 0, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);  /* inner top edge highlight */
}

/* macOS chrome dots rendered via three radial-gradient circles
   Red @ 6px · Yellow @ 26px · Green @ 46px  (12px dots, 8px gaps) */
.md-typeset .terminal::before {
  content: '';
  display: block;
  width: 52px;      /* 3 × 12px + 2 × 8px gap */
  height: 12px;
  flex-shrink: 0;
  margin-bottom: 1.25rem;
  background-image:
    radial-gradient(circle 6px at  6px 6px, #ff5f56 100%, transparent 100%),
    radial-gradient(circle 6px at 26px 6px, #ffbd2e 100%, transparent 100%),
    radial-gradient(circle 6px at 46px 6px, #27c93f 100%, transparent 100%);
  background-size: 52px 12px;
  background-repeat: no-repeat;
}

/* Syntax tokens — refined GitHub Dark palette */
.md-typeset .terminal .prompt {
  color: #3fb950;    /* GitHub Actions green */
  font-weight: 600;
}

.md-typeset .terminal .command {
  color: #e3b341;    /* amber — commands are actions, not output */
}

.md-typeset .terminal .output {
  color: #a5c3f7;    /* desaturated blue — informational */
}

/* Selection tinted with brand accent */
.md-typeset .terminal ::selection {
  background: rgba(82, 108, 254, 0.35);
}


/* ============================================================
   6. TABLES
   Uppercase headers, zebra striping, row hover highlight,
   first-column prominence, bold text in brand colour.
   ============================================================ */

.md-typeset table:not([class]) {
  font-size: 0.875rem;
  width: 100%;
}

/* Header row */
.md-typeset table:not([class]) th {
  background: rgba(var(--amp-primary-rgb), 0.06);
  font-size: 0.70rem;
  font-weight: 700;
  letter-spacing: 0.07em;
  text-transform: uppercase;
  padding: 0.65rem 1rem;
  color: var(--md-default-fg-color--light);
  white-space: nowrap;
}

[data-md-color-scheme="slate"] .md-typeset table:not([class]) th {
  background: rgba(var(--amp-primary-rgb), 0.09);
  color: rgba(255, 255, 255, 0.45);
}

/* Data cells */
.md-typeset table:not([class]) td {
  padding: 0.6rem 1rem;
  vertical-align: top;
  line-height: 1.5;
}

/* First column — Type label — should stand out */
.md-typeset table:not([class]) td:first-child {
  font-weight: 600;
  white-space: nowrap;
  color: var(--md-typeset-color);
}

/* Bold text inside cells (e.g. **Providers**) → brand colour */
.md-typeset table:not([class]) td strong {
  color: var(--md-primary-fg-color);
  font-weight: 600;
}

/* Zebra striping — subtle, doesn't fight the border colours */
.md-typeset table:not([class]) tbody tr:nth-child(even) td {
  background: rgba(var(--amp-primary-rgb), 0.025);
}

[data-md-color-scheme="slate"] .md-typeset table:not([class]) tbody tr:nth-child(even) td {
  background: rgba(var(--amp-primary-rgb), 0.04);
}

/* Row hover highlight */
.md-typeset table:not([class]) tbody tr {
  transition: background 140ms ease;
}

.md-typeset table:not([class]) tbody tr:hover td {
  background: rgba(var(--amp-primary-rgb), 0.06) !important;
}

[data-md-color-scheme="slate"] .md-typeset table:not([class]) tbody tr:hover td {
  background: rgba(255, 255, 255, 0.04) !important;
}


/* ============================================================
   7. ARCHITECTURE DIAGRAM  —  .architecture-diagram
   Add this class to the div wrapping the ASCII art code block:

     <div class="architecture-diagram">
     ```
     ┌──────────────── ...
     ```
     </div>

   Requires md_in_html extension (enabled by Material by default).
   ============================================================ */

.md-typeset .architecture-diagram pre,
.md-typeset .architecture-diagram pre > code {
  background: var(--md-code-bg-color);
  border: 1px solid var(--md-default-fg-color--lightest);
  border-radius: 8px;
  font-size: 0.775rem;
  line-height: 1.55;
  overflow-x: auto;
  padding: 1.25rem 1.5rem;
}


/* ============================================================
   8. CODE BLOCKS  —  minor refinements
   ============================================================ */

.md-typeset pre > code {
  font-size: 0.85rem;
  line-height: 1.65;
}

/* Slightly larger radius on the pre wrapper */
.md-typeset pre {
  border-radius: var(--amp-radius-sm);
}


/* ============================================================
   9. ADMONITIONS
   tip  → green  (success/recommendation)
   note → sky    (--amp-signal: AI/intelligence-layer callouts)
   ============================================================ */

/* Note — signal sky blue, used for AI/agent-specific callouts */
.md-typeset .admonition.note,
.md-typeset details.note {
  border-color: rgb(var(--amp-signal-rgb));
}

.md-typeset .admonition.note > .admonition-title,
.md-typeset details.note > summary {
  background-color: rgba(var(--amp-signal-rgb), 0.08);
}

[data-md-color-scheme="slate"] .md-typeset .admonition.note > .admonition-title,
[data-md-color-scheme="slate"] .md-typeset details.note > summary {
  background-color: rgba(var(--amp-signal-rgb), 0.12);
}

.md-typeset .admonition.tip,
.md-typeset details.tip {
  border-color: rgb(var(--amp-tip-rgb));
}

.md-typeset .admonition.tip > .admonition-title,
.md-typeset details.tip > summary {
  background-color: rgba(var(--amp-tip-rgb), 0.08);
}

/* Slightly more visible tint on dark surfaces */
[data-md-color-scheme="slate"] .md-typeset .admonition.tip > .admonition-title,
[data-md-color-scheme="slate"] .md-typeset details.tip > summary {
  background-color: rgba(var(--amp-tip-rgb), 0.12);
}


/* ============================================================
   10. BUTTONS & LINKS
   ============================================================ */

/* External link marker */
.md-typeset a.external::after {
  content: " ↗";
  font-size: 0.75em;
}

/* Primary CTA — lift with brand shadow */
.md-typeset .md-button--primary {
  font-weight: 600;
  letter-spacing: 0.01em;
  transition:
    background-color 200ms cubic-bezier(0.16, 1, 0.3, 1),
    box-shadow       200ms cubic-bezier(0.16, 1, 0.3, 1),
    transform        200ms cubic-bezier(0.16, 1, 0.3, 1);
}

.md-typeset .md-button--primary:hover {
  box-shadow: 0 4px 20px rgba(var(--amp-primary-rgb), 0.40);
  transform: translateY(-1px);
}

/* Secondary button — border + text colour shift on hover */
.md-typeset .md-button:not(.md-button--primary) {
  transition:
    border-color 200ms cubic-bezier(0.16, 1, 0.3, 1),
    color        200ms cubic-bezier(0.16, 1, 0.3, 1),
    transform    200ms cubic-bezier(0.16, 1, 0.3, 1);
}

.md-typeset .md-button:not(.md-button--primary):hover {
  transform: translateY(-1px);
  border-color: var(--md-primary-fg-color);
  color: var(--md-primary-fg-color);
}


/* ============================================================
   11. FOCUS STATES
   Keyboard users get brand-colored focus rings on interactive
   elements. :focus-visible targets keyboard-only (not mouse).
   ============================================================ */

.md-typeset .grid .card:focus-within {
  outline: 2px solid rgba(var(--amp-primary-rgb), 0.7);
  outline-offset: 2px;
}

.md-typeset .md-button:focus-visible {
  outline: 2px solid rgba(var(--amp-primary-rgb), 0.7);
  outline-offset: 3px;
}

.md-typeset .module-card:focus-within {
  outline: 2px solid rgba(var(--amp-primary-rgb), 0.5);
  outline-offset: 2px;
}


/* ============================================================
   12. ANCHOR LINKS (PILCROW)
   Hide ¶ permalink until the heading is hovered.
   :focus preserves keyboard accessibility.
   ============================================================ */

.md-typeset .headerlink {
  opacity: 0;
  transition: opacity 150ms ease;
  margin-left: 0.5em;
}

.md-typeset :hover > .headerlink,
.md-typeset .headerlink:focus {
  opacity: 1;
}


/* ============================================================
   12. MOBILE OVERFLOW
   Tables scroll horizontally rather than overflowing viewport.
   Code blocks go edge-to-edge on small screens for max width.
   ============================================================ */

.md-typeset table:not([class]) {
  display: block;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--amp-primary-rgb), 0.3) transparent;
}

.md-typeset table:not([class])::-webkit-scrollbar { height: 4px; }
.md-typeset table:not([class])::-webkit-scrollbar-thumb {
  background: rgba(var(--amp-primary-rgb), 0.3);
  border-radius: 2px;
}

@media (max-width: 44.9375em) {
  .md-typeset pre { border-radius: 0; }
}


/* ============================================================
   13. TYPOGRAPHY — Inter refinements
   Inter requires tighter letter-spacing at display sizes.
   ============================================================ */

.md-typeset h1 { letter-spacing: -0.02em;  font-weight: 700; }
.md-typeset h2 { letter-spacing: -0.015em; font-weight: 600; }
.md-typeset h3 { letter-spacing: -0.01em;  font-weight: 600; }


/* ============================================================
   14. REDUCED MOTION
   All transitions and transforms are disabled for users who
   prefer reduced motion. Accessibility first.
   ============================================================ */

@media (prefers-reduced-motion: reduce) {
  .md-typeset .grid .card,
  .md-typeset .module-card,
  .md-typeset .md-button,
  .md-typeset .md-button--primary,
  .md-typeset table:not([class]) tbody tr {
    transition: none !important;
    transform:  none !important;
  }
}
